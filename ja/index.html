<!DOCTYPE html>
<html lang="ja" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ClawPurse Gateway — AIエージェント・API向けHTTP 402マイクロペイメントゲートウェイ</title>
  <meta name="description" content="任意のAPIをNTMPIブロックチェーンマイクロペイメントでゲーティングするオープンソースHTTP 402 Payment Requiredリバースプロキシ。AIエージェント、マシン間取引、Neutaro上のDePIN自動化向け。">
  <meta name="keywords" content="HTTP 402, Payment Required, micropayment gateway, API monetization, pay-per-request, NTMPI, Neutaro, blockchain payments, agentic AI, machine-to-machine payments, DePIN, x402 protocol, AI agent commerce, reverse proxy, ClawPurse, Timpi, crypto micropayments, API paywall, on-chain verification">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://gateway.clawpurse.ai/ja/">
  <link rel="alternate" hreflang="en" href="https://gateway.clawpurse.ai/" />
  <link rel="alternate" hreflang="ja" href="https://gateway.clawpurse.ai/ja/" />
  <link rel="alternate" hreflang="ko" href="https://gateway.clawpurse.ai/ko/" />
  <link rel="alternate" hreflang="es" href="https://gateway.clawpurse.ai/es/" />
  <link rel="alternate" hreflang="fr" href="https://gateway.clawpurse.ai/fr/" />
  <link rel="alternate" hreflang="hi" href="https://gateway.clawpurse.ai/hi/" />
  <link rel="alternate" hreflang="zh" href="https://gateway.clawpurse.ai/zh/" />
  <link rel="alternate" hreflang="id" href="https://gateway.clawpurse.ai/id/" />
  <link rel="alternate" hreflang="x-default" href="https://gateway.clawpurse.ai/" />
  <meta property="og:title" content="ClawPurse Gateway — AIエージェント向けHTTP 402マイクロペイメントゲートウェイ">
  <meta property="og:description" content="オンチェーンNTMPIマイクロペイメントで任意のAPIをゲーティングするオープンソースリバースプロキシ。">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://gateway.clawpurse.ai/ja/">
  <meta property="og:site_name" content="ClawPurse Gateway">
  <meta property="og:locale" content="en_US">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ClawPurse Gateway — AIエージェント向けHTTP 402マイクロペイメントゲートウェイ">
  <meta name="twitter:description" content="オンチェーンNTMPIマイクロペイメントで任意のAPIをゲーティング。エージェントAIとマシン間取引のために構築。">
  <meta name="author" content="Mhue">
  <meta name="generator" content="ClawPurse">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=IBM+Plex+Mono:wght@400;500;600&family=Noto+Sans+JP:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-void: #020409;
      --bg-base: #070b14;
      --bg-card: #0c1220;
      --bg-elevated: #111a2e;
      --accent-402: #ff3b30;
      --accent-402-dim: rgba(255, 59, 48, 0.15);
      --accent-mint: #32d6a8;
      --accent-mint-dim: rgba(50, 214, 168, 0.12);
      --accent-gold: #fbbf24;
      --accent-gold-dim: rgba(251, 191, 36, 0.12);
      --text-1: #eef2ff;
      --text-2: #8b95b0;
      --text-3: #515c75;
      --border-1: rgba(139, 149, 176, 0.12);
      --border-2: rgba(139, 149, 176, 0.06);
      --font-body: 'DM Sans', system-ui, -apple-system, sans-serif;
      --font-mono: 'IBM Plex Mono', 'SF Mono', 'Fira Code', monospace;
      --radius-sm: 8px;
      --radius-md: 14px;
      --radius-lg: 22px;
      --radius-xl: 32px;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: var(--font-body);
      background: var(--bg-void);
      color: var(--text-1);
      min-height: 100vh;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    /* ---- Ambient background ---- */
    .ambient {
      position: fixed; inset: 0; z-index: -1; pointer-events: none;
      background:
        radial-gradient(ellipse 80% 60% at 15% 10%, rgba(255,59,48,0.06), transparent),
        radial-gradient(ellipse 70% 50% at 85% 5%, rgba(50,214,168,0.05), transparent),
        radial-gradient(ellipse 60% 80% at 50% 100%, rgba(251,191,36,0.03), transparent),
        var(--bg-void);
    }
    .grain {
      position: fixed; inset: 0; z-index: -1; pointer-events: none; opacity: 0.35;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
    }

    /* ---- Utility ---- */
    .container { max-width: 1060px; margin: 0 auto; padding: 0 24px; }
    .mono { font-family: var(--font-mono); }
    .tag {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 5px 12px; border-radius: 999px; font-size: 0.75rem;
      font-weight: 600; letter-spacing: 0.06em; text-transform: uppercase;
    }
    .tag--402 { background: var(--accent-402-dim); color: var(--accent-402); }
    .tag--mint { background: var(--accent-mint-dim); color: var(--accent-mint); }
    .tag--gold { background: var(--accent-gold-dim); color: var(--accent-gold); }

    /* ---- Hero ---- */
    .hero { padding: 96px 0 72px; text-align: center; }
    .hero__badge {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 6px 16px 6px 8px; border-radius: 999px;
      background: var(--bg-card); border: 1px solid var(--border-1);
      font-size: 0.82rem; color: var(--text-2); margin-bottom: 28px;
    }
    .hero__badge .dot {
      width: 8px; height: 8px; border-radius: 50%;
      background: var(--accent-mint);
      box-shadow: 0 0 8px var(--accent-mint);
      animation: pulse-dot 2.4s ease-in-out infinite;
    }
    @keyframes pulse-dot {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }
    .hero h1 {
      font-size: clamp(2.6rem, 5.5vw, 4.2rem);
      font-weight: 700; line-height: 1.08;
      letter-spacing: -0.03em;
    }
    .hero h1 .hl-402 {
      background: linear-gradient(135deg, var(--accent-402), #ff6a5e);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .hero__sub {
      margin: 20px auto 0; max-width: 620px;
      font-size: 1.15rem; color: var(--text-2); line-height: 1.7;
    }
    .hero__actions {
      margin-top: 40px; display: flex; flex-wrap: wrap;
      gap: 14px; justify-content: center;
    }
    .btn {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 13px 26px; border-radius: var(--radius-xl);
      font-family: var(--font-body); font-size: 0.92rem; font-weight: 600;
      text-decoration: none; border: none; cursor: pointer;
      transition: transform 0.18s ease, box-shadow 0.18s ease;
    }
    .btn:hover { transform: translateY(-2px); }
    .btn--primary {
      background: linear-gradient(135deg, var(--accent-402), #cc2d24);
      color: #fff; box-shadow: 0 8px 32px rgba(255,59,48,0.3);
    }
    .btn--primary:hover { box-shadow: 0 12px 40px rgba(255,59,48,0.4); }
    .btn--ghost {
      background: transparent; color: var(--text-1);
      border: 1px solid var(--border-1);
    }
    .btn--ghost:hover { border-color: var(--text-3); }
    .btn--mint {
      background: linear-gradient(135deg, var(--accent-mint), #28b893);
      color: var(--bg-void); box-shadow: 0 8px 32px rgba(50,214,168,0.25);
    }

    /* ---- Flow diagram ---- */
    .flow { padding: 48px 0 64px; }
    .flow__box {
      background: var(--bg-card); border: 1px solid var(--border-1);
      border-radius: var(--radius-lg); padding: 32px;
      overflow-x: auto;
      box-shadow: 0 24px 64px rgba(0,0,0,0.4);
    }
    .flow__box pre {
      font-family: var(--font-mono); font-size: 0.82rem;
      line-height: 1.65; color: var(--text-2); white-space: pre;
      margin: 0;
    }
    .flow__box pre .c-402 { color: var(--accent-402); font-weight: 600; }
    .flow__box pre .c-mint { color: var(--accent-mint); }
    .flow__box pre .c-gold { color: var(--accent-gold); }
    .flow__box pre .c-dim { color: var(--text-3); }

    /* ---- Section headings ---- */
    .section { padding: 64px 0; }
    .section__label { margin-bottom: 8px; }
    .section__title {
      font-size: clamp(1.6rem, 3vw, 2.1rem);
      font-weight: 700; letter-spacing: -0.02em;
      margin-bottom: 12px;
    }
    .section__desc {
      color: var(--text-2); max-width: 640px; font-size: 1.05rem;
      margin-bottom: 40px;
    }

    /* ---- Feature grid ---- */
    .features { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 18px; }
    .fcard {
      background: var(--bg-card); border: 1px solid var(--border-1);
      border-radius: var(--radius-lg); padding: 28px;
      transition: border-color 0.25s ease, box-shadow 0.25s ease;
    }
    .fcard:hover { border-color: rgba(139,149,176,0.2); box-shadow: 0 16px 48px rgba(0,0,0,0.3); }
    .fcard__icon {
      width: 40px; height: 40px; border-radius: var(--radius-sm);
      display: flex; align-items: center; justify-content: center;
      font-size: 1.2rem; margin-bottom: 16px;
    }
    .fcard__icon--red   { background: var(--accent-402-dim); }
    .fcard__icon--mint  { background: var(--accent-mint-dim); }
    .fcard__icon--gold  { background: var(--accent-gold-dim); }
    .fcard h3 { font-size: 1.05rem; font-weight: 600; margin-bottom: 8px; }
    .fcard p  { color: var(--text-2); font-size: 0.92rem; line-height: 1.6; }

    /* ---- API table ---- */
    .api-table-wrap {
      background: var(--bg-card); border: 1px solid var(--border-1);
      border-radius: var(--radius-lg); overflow: hidden;
      box-shadow: 0 20px 60px rgba(0,0,0,0.35);
    }
    .api-table-wrap h3 {
      padding: 20px 24px 0; font-size: 0.95rem; font-weight: 600;
      color: var(--text-2); letter-spacing: 0.03em;
    }
    table { width: 100%; border-collapse: collapse; font-size: 0.88rem; }
    thead th {
      text-align: left; padding: 14px 24px; font-weight: 600;
      color: var(--text-3); border-bottom: 1px solid var(--border-1);
      font-size: 0.78rem; text-transform: uppercase; letter-spacing: 0.08em;
    }
    tbody td { padding: 12px 24px; border-bottom: 1px solid var(--border-2); }
    tbody tr:last-child td { border-bottom: none; }
    tbody td:first-child { font-family: var(--font-mono); font-size: 0.82rem; }
    .method {
      display: inline-block; font-family: var(--font-mono); font-size: 0.72rem;
      font-weight: 600; padding: 2px 7px; border-radius: 4px;
      letter-spacing: 0.04em; min-width: 44px; text-align: center;
    }
    .method--get  { background: var(--accent-mint-dim); color: var(--accent-mint); }
    .method--post { background: var(--accent-gold-dim); color: var(--accent-gold); }
    .method--any  { background: var(--accent-402-dim); color: var(--accent-402); }
    .path-cell { font-family: var(--font-mono); color: var(--text-1); }
    .desc-cell { color: var(--text-2); }

    /* ---- Code blocks ---- */
    .code-card {
      background: var(--bg-card); border: 1px solid var(--border-1);
      border-radius: var(--radius-lg); overflow: hidden;
      box-shadow: 0 20px 60px rgba(0,0,0,0.35);
    }
    .code-card__header {
      display: flex; align-items: center; gap: 10px;
      padding: 14px 20px; border-bottom: 1px solid var(--border-1);
      background: var(--bg-elevated);
    }
    .code-card__dot {
      width: 10px; height: 10px; border-radius: 50%; opacity: 0.6;
    }
    .code-card__title {
      font-family: var(--font-mono); font-size: 0.78rem;
      color: var(--text-3); margin-left: 4px;
    }
    .code-card pre {
      padding: 20px; margin: 0; overflow-x: auto;
      font-family: var(--font-mono); font-size: 0.82rem;
      line-height: 1.7; color: var(--text-2);
    }
    .code-card pre .kw  { color: var(--accent-402); }
    .code-card pre .fn  { color: var(--accent-mint); }
    .code-card pre .str { color: var(--accent-gold); }
    .code-card pre .cm  { color: var(--text-3); font-style: italic; }
    .code-card pre .num { color: #c4b5fd; }

    /* ---- Dual-column layout ---- */
    .split { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    @media (max-width: 740px) { .split { grid-template-columns: 1fr; } }

    /* ---- Architecture ---- */
    .arch-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 14px; }
    .acard {
      background: var(--bg-card); border: 1px solid var(--border-1);
      border-radius: var(--radius-md); padding: 20px; text-align: center;
    }
    .acard__name {
      font-family: var(--font-mono); font-size: 0.82rem; font-weight: 600;
      margin-bottom: 6px;
    }
    .acard__desc { font-size: 0.82rem; color: var(--text-2); }

    /* ---- Config table ---- */
    .config-table-wrap {
      background: var(--bg-card); border: 1px solid var(--border-1);
      border-radius: var(--radius-lg); overflow: hidden;
      box-shadow: 0 20px 60px rgba(0,0,0,0.35);
    }
    .config-table-wrap table td:nth-child(1) { color: var(--accent-mint); }
    .config-table-wrap table td:nth-child(2) {
      font-family: var(--font-mono); font-size: 0.8rem; color: var(--text-3);
    }

    /* ---- Ecosystem ---- */
    .eco-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 18px; }
    .eco-card {
      background: var(--bg-card); border: 1px solid var(--border-1);
      border-radius: var(--radius-lg); padding: 28px;
    }
    .eco-card h3 { font-size: 1rem; font-weight: 600; margin-bottom: 8px; }
    .eco-card p { color: var(--text-2); font-size: 0.9rem; line-height: 1.6; }
    .eco-card a { color: var(--accent-mint); text-decoration: none; }
    .eco-card a:hover { text-decoration: underline; }

    /* ---- Donate ---- */
    .donate {
      text-align: center; margin-top: 48px; padding: 36px;
      background: var(--bg-card); border: 1px solid var(--accent-402-dim);
      border-radius: var(--radius-lg);
      box-shadow: 0 24px 64px rgba(0,0,0,0.4);
    }
    .donate__addr {
      display: inline-block; margin-top: 12px; padding: 12px 20px;
      background: rgba(0,0,0,0.35); border: 1px solid var(--border-1);
      border-radius: var(--radius-sm);
      font-family: var(--font-mono); font-size: 0.88rem;
      word-break: break-all;
    }

    /* ---- Footer ---- */
    footer {
      text-align: center; padding: 56px 24px 72px;
      color: var(--text-3); font-size: 0.85rem;
    }
    footer a { color: var(--text-2); text-decoration: none; }
    footer a:hover { color: var(--text-1); }
    .footer-links { display: flex; flex-wrap: wrap; gap: 24px; justify-content: center; margin-bottom: 16px; }

    /* ---- Responsive ---- */
    @media (max-width: 600px) {
      .hero { padding: 64px 0 48px; }
      .section { padding: 48px 0; }
      .features { grid-template-columns: 1fr; }
      .arch-cards { grid-template-columns: 1fr 1fr; }
      .flow__box { padding: 20px; }
      .flow__box pre { font-size: 0.7rem; }
    }

    /* ---- Fade-in ---- */
    .reveal {
      opacity: 0; transform: translateY(20px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .reveal.visible { opacity: 1; transform: translateY(0); }
  </style>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "ClawPurse Gateway",
    "alternateName": "ClawPurse 402 Gateway",
    "operatingSystem": "Linux, macOS, Windows",
    "applicationCategory": "FinanceApplication",
    "applicationSubCategory": "Payment Gateway",
    "offers": {"@type": "Offer", "price": "0", "priceCurrency": "USD"},
    "description": "Open-source HTTP reverse proxy gating API access behind NTMPI micropayments on the Neutaro blockchain. Designed for agentic AI and machine-to-machine commerce.",
    "softwareVersion": "0.2.0",
    "programmingLanguage": "TypeScript",
    "codeRepository": "https://github.com/mhue-ai/clawpurse-gateway",
    "license": "https://opensource.org/licenses/MIT",
    "author": {
      "@type": "Person",
      "name": "Mhue",
      "url": "https://github.com/mhue-ai"
    },
    "keywords": "HTTP 402, Payment Required, micropayment gateway, API monetization, NTMPI, Neutaro, agentic AI, machine-to-machine payments, DePIN, reverse proxy, blockchain payments"
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "What is ClawPurse Gateway?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "ClawPurse Gateway is an open-source HTTP reverse proxy that implements the 402 Payment Required status code to gate any API behind NTMPI micropayments on the Neutaro blockchain. It supports pay-per-request and prepaid balance flows for AI agents, automation scripts, and machine-to-machine commerce."
        }
      },
      {
        "@type": "Question",
        "name": "How does the HTTP 402 payment flow work?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "A client requests a gated endpoint and receives a 402 response with an invoice containing an invoiceId, amount, address, and memo. The client pays on-chain using ClawPurse or any Neutaro wallet, then retries the request with an X-Payment-Proof header. The gateway verifies the transaction on the Neutaro blockchain and proxies the request to the upstream API."
        }
      },
      {
        "@type": "Question",
        "name": "What is NTMPI and how do I get it?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "NTMPI is the native token of the Neutaro blockchain, part of the Timpi decentralised search network. You can acquire NTMPI on the MEXC exchange via the NTMPI/USDT spot pair, or bridge through Gravity Bridge to Osmosis and swap for NTMPI using Keplr or Leap wallet."
        }
      },
      {
        "@type": "Question",
        "name": "Can AI agents use ClawPurse Gateway autonomously?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes. ClawPurse Gateway is designed for agentic AI and machine-to-machine workloads. AI agents can programmatically handle the 402 flow by parsing the invoice, paying on-chain via the ClawPurse wallet API, and retrying with the payment proof header — all without human intervention."
        }
      }
    ]
  }
  </script>
</head>
<body>
  <div class="ambient"></div>
  <div class="grain"></div>

  <!-- ============ HERO ============ -->
  <header class="hero container">
    <a href="#main-content" class="sr-only" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">メインコンテンツへスキップ</a>
    <div class="hero__badge" role="status" aria-label="Version status">
      <span class="dot" aria-hidden="true"></span>
      v0.2.0 — GitHubでオープンソース
    </div>
    <h1>ClawPurse<br><span class="hl-402">402 Gateway</span></h1>
    <p class="hero__sub">
      Neutaroブロックチェーン上の<strong>NTMPIマイクロペイメント</strong>で任意のAPIをゲーティングするHTTPリバースプロキシ。AIエージェント、自動化スクリプト、マシン間取引向けのリクエスト単位課金・前払い残高フロー。
    </p>
    <nav class="hero__actions" aria-label="Primary actions">
      <a class="btn btn--primary" href="https://github.com/mhue-ai/clawpurse-gateway" target="_blank" rel="noopener">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
        View on GitHub
      </a>
      <a class="btn btn--ghost" href="https://github.com/mhue-ai/clawpurse-gateway/blob/master/README.md" target="_blank" rel="noopener">ドキュメントを読む</a>
      <a class="btn btn--mint" href="https://github.com/mhue-ai/ClawPurse" target="_blank" rel="noopener">ClawPurseウォレット</a>
      <a class="btn btn--ghost" href="https://drip.clawpurse.ai" target="_blank" rel="noopener">Timpi Dripファウセット</a>
    </nav>
    <div style="position:fixed;top:16px;right:16px;z-index:100;"><select id="langSwitcher" aria-label="言語" onchange="window.location.href=this.value">
            <option value="/">English</option>
            <option value="/ja/" selected>日本語</option>
            <option value="/ko/">한국어</option>
            <option value="/es/">Español</option>
            <option value="/fr/">Français</option>
            <option value="/hi/">हिन्दी</option>
            <option value="/zh/">中文</option>
            <option value="/id/">Bahasa Indonesia</option>
          </select></div>
  </header>

  <!-- ============ FLOW DIAGRAM ============ -->
  <div class="flow container reveal" role="figure" aria-label="クライアント、ゲートウェイ、ブロックチェーンの相互作用を示すHTTP 402決済フロー図">
    <div class="flow__box">
<pre><span class="c-dim">  クライアント（AIエージェント、スクリプト、ブラウザ）</span>
    │
    ├── <span class="c-mint">GET /api/data</span> ─────────────────────▶  <span class="c-402">402 Gateway</span>
    │                                              │
    │   ◀── <span class="c-402">402 Payment Required</span> ────────────────┘
    │       <span class="c-gold">{ invoiceId, amount, address, memo }</span>
    │
    ├── <span class="c-mint">clawpurse send</span> &lt;address&gt; &lt;amount&gt; --memo &lt;memo&gt; --yes
    │       <span class="c-dim">（オンチェーンNTMPI決済）</span>
    │
    ├── <span class="c-mint">GET /api/data</span> ─────────────────────▶  <span class="c-402">402 Gateway</span>
    │   Header: <span class="c-gold">X-Payment-Proof: &lt;invoiceId&gt;</span>     │
    │                                              │
    │   <span class="c-dim">ゲートウェイがNeutaroで決済を検証</span>    │
    │                                              │
    │   ◀── <span class="c-mint">200 OK</span> <span class="c-dim">（アップストリームからプロキシ）</span> ────┘</pre>
    </div>
  </div>

  <main class="container" id="main-content">

    <!-- ============ PAYMENT FLOWS ============ -->
    <section class="section reveal" id="payment-flows">
      <span class="tag tag--402">決済フロー</span>
      <h2 class="section__title">2つのマイクロペイメントフロー：リクエスト単位課金と前払い残高</h2>
      <p class="section__desc">
        エージェントがコールごとに支払うか残高を事前入金するかに関わらず、ゲートウェイがインボイス作成、オンチェーン検証、アップストリームプロキシを自動処理します。
      </p>
      <div class="split">
        <div class="fcard">
          <div class="fcard__icon fcard__icon--red">1</div>
          <h3>リクエスト単位課金</h3>
          <p>
            クライアントがゲート付きエンドポイントにアクセスし、インボイス付きの<strong>402</strong>を受け取ります。オンチェーンで決済し、<code style="font-size:0.82rem; background:var(--bg-elevated); padding:2px 6px; border-radius:4px;">X-Payment-Proof</code>ヘッダー付きでリトライ。ゲートウェイがNeutaroでトランザクションを検証しアップストリームにプロキシします。
          </p>
        </div>
        <div class="fcard">
          <div class="fcard__icon fcard__icon--mint">2</div>
          <h3>前払い残高</h3>
          <p>
            クライアントが<code style="font-size:0.82rem; background:var(--bg-elevated); padding:2px 6px; border-radius:4px;">/prepaid/deposit</code>経由で一度NTMPIを入金。以降のリクエストは<code style="font-size:0.82rem; background:var(--bg-elevated); padding:2px 6px; border-radius:4px;">X-Client-Id</code>ヘッダーを含み、ゲートウェイがコールごとに残高から差し引きます — オンチェーン取引の繰り返し不要。
          </p>
        </div>
      </div>
    </section>

    <!-- ============ FEATURES ============ -->
    <section class="section reveal" id="features">
      <span class="tag tag--mint">機能</span>
      <h2 class="section__title">AIエージェントとマシン間取引のために構築</h2>
      <p class="section__desc">
        マシン間マイクロペイメントレイヤーに必要なすべて、それ以上は何もなし。
      </p>
      <div class="features">
        <div class="fcard">
          <div class="fcard__icon fcard__icon--red">&#x26A1;</div>
          <h3>オンチェーン検証</h3>
          <p>アクセスを許可する前にNeutaro REST APIに問い合わせて支払い金額、メモ、ブロック確認を確認。</p>
        </div>
        <div class="fcard">
          <div class="fcard__icon fcard__icon--mint">&#x1F9FE;</div>
          <h3>ルートレベル価格設定</h3>
          <p>デフォルト価格を設定し、<code style="font-size:0.8rem; background:var(--bg-elevated); padding:1px 5px; border-radius:4px;">GATEWAY_ROUTES</code>でルートごとにオーバーライド。安い読み取り、高い書き込み。</p>
        </div>
        <div class="fcard">
          <div class="fcard__icon fcard__icon--gold">&#x1F512;</div>
          <h3>管理API</h3>
          <p>内部ウォレット、トランザクション、軽量ブロックチェーン台帳のためのJWT保護エンドポイント。</p>
        </div>
        <div class="fcard">
          <div class="fcard__icon fcard__icon--red">&#x1F504;</div>
          <h3>リバースプロキシ</h3>
          <p>認証済みリクエストをアップストリームAPIに透過的に転送。どのバックエンド、どの言語でも対応。</p>
        </div>
        <div class="fcard">
          <div class="fcard__icon fcard__icon--mint">&#x1F4E6;</div>
          <h3>SQLiteストレージ</h3>
          <p>インボイス、前払い残高、決済ログを単一ファイルにローカル保存。外部依存なし。</p>
        </div>
        <div class="fcard">
          <div class="fcard__icon fcard__icon--gold">&#x1F433;</div>
          <h3>Docker対応</h3>
          <p><code style="font-size:0.8rem; background:var(--bg-elevated); padding:1px 5px; border-radius:4px;">docker compose up</code>のワンコマンドデプロイ。ベアメタル用Ubuntuデプロイスクリプト付属。</p>
        </div>
      </div>
    </section>

    <!-- ============ API ENDPOINTS ============ -->
    <section class="section reveal" id="api">
      <span class="tag tag--gold">API</span>
      <h2 class="section__title">ゲートウェイAPIエンドポイントリファレンス</h2>
      <p class="section__desc">
        ヘルスチェック、インボイス確認、残高照会のための無料エンドポイント。それ以外はすべて402ゲートを通過。
      </p>

      <div style="display: flex; flex-direction: column; gap: 24px;">
        <div class="api-table-wrap">
          <h3>無料 — 決済不要</h3>
          <table>
            <thead><tr><th>メソッド</th><th>パス</th><th>説明</th></tr></thead>
            <tbody>
              <tr>
                <td><span class="method method--get">GET</span></td>
                <td class="path-cell">/health</td>
                <td class="desc-cell">ゲートウェイ設定付きヘルスチェック</td>
              </tr>
              <tr>
                <td><span class="method method--get">GET</span></td>
                <td class="path-cell">/invoices/:id</td>
                <td class="desc-cell">インボイスステータス確認（オンチェーン検証をトリガー）</td>
              </tr>
              <tr>
                <td><span class="method method--post">POST</span></td>
                <td class="path-cell">/prepaid/deposit</td>
                <td class="desc-cell">入金登録（まずオンチェーンでtxを検証）</td>
              </tr>
              <tr>
                <td><span class="method method--get">GET</span></td>
                <td class="path-cell">/prepaid/balance/:clientId</td>
                <td class="desc-cell">前払い残高確認</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="api-table-wrap">
          <h3>管理 — JWT保護</h3>
          <table>
            <thead><tr><th>メソッド</th><th>パス</th><th>説明</th></tr></thead>
            <tbody>
              <tr><td><span class="method method--post">POST</span></td><td class="path-cell">/manage/auth/register</td><td class="desc-cell">管理者アカウント登録</td></tr>
              <tr><td><span class="method method--post">POST</span></td><td class="path-cell">/manage/auth/login</td><td class="desc-cell">ログイン、JWTトークン取得</td></tr>
              <tr><td><span class="method method--post">POST</span></td><td class="path-cell">/manage/wallet</td><td class="desc-cell">内部ウォレット作成</td></tr>
              <tr><td><span class="method method--get">GET</span></td><td class="path-cell">/manage/wallet</td><td class="desc-cell">ウォレット一覧</td></tr>
              <tr><td><span class="method method--get">GET</span></td><td class="path-cell">/manage/wallet/:id</td><td class="desc-cell">IDでウォレット取得</td></tr>
              <tr><td><span class="method method--post">POST</span></td><td class="path-cell">/manage/transactions</td><td class="desc-cell">内部トランザクション作成</td></tr>
              <tr><td><span class="method method--get">GET</span></td><td class="path-cell">/manage/transactions/:id</td><td class="desc-cell">IDでトランザクション取得</td></tr>
            </tbody>
          </table>
        </div>

        <div class="api-table-wrap">
          <h3>402ゲート — キャッチオール</h3>
          <table>
            <thead><tr><th>メソッド</th><th>パス</th><th>説明</th></tr></thead>
            <tbody>
              <tr>
                <td><span class="method method--any">ANY</span></td>
                <td class="path-cell">/*</td>
                <td class="desc-cell">その他のリクエストはすべて決済または前払い残高が必要</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- ============ AGENT INTEGRATION ============ -->
    <section class="section reveal" id="integration">
      <span class="tag tag--402">インテグレーション</span>
      <h2 class="section__title">エージェント統合：PythonとTypeScriptの例</h2>
      <p class="section__desc">
        数行で402フローを任意のエージェントに組み込み。ゲートウェイがインボイス発行と検証を処理します。コードは支払いとリトライだけ。
      </p>
      <div class="split">
        <div class="code-card">
          <div class="code-card__header">
            <span class="code-card__dot" style="background:#ff5f57;"></span>
            <span class="code-card__dot" style="background:#febc2e;"></span>
            <span class="code-card__dot" style="background:#28c840;"></span>
            <span class="code-card__title">agent.py</span>
          </div>
<pre><span class="kw">import</span> requests, subprocess, os

res = requests.<span class="fn">get</span>(<span class="str">"http://gateway:4020/api/data"</span>)

<span class="kw">if</span> res.status_code == <span class="num">402</span>:
    inv = res.<span class="fn">json</span>()[<span class="str">"payment"</span>]

    <span class="cm"># Pay with ClawPurse</span>
    subprocess.<span class="fn">run</span>([
        <span class="str">"clawpurse"</span>, <span class="str">"send"</span>,
        inv[<span class="str">"address"</span>], inv[<span class="str">"amount"</span>],
        <span class="str">"--memo"</span>, inv[<span class="str">"memo"</span>], <span class="str">"--yes"</span>
    ])

    <span class="cm"># Retry with proof</span>
    res = requests.<span class="fn">get</span>(
        <span class="str">"http://gateway:4020/api/data"</span>,
        headers={<span class="str">"X-Payment-Proof"</span>: inv[<span class="str">"invoiceId"</span>]}
    )

data = res.<span class="fn">json</span>()</pre>
        </div>
        <div class="code-card">
          <div class="code-card__header">
            <span class="code-card__dot" style="background:#ff5f57;"></span>
            <span class="code-card__dot" style="background:#febc2e;"></span>
            <span class="code-card__dot" style="background:#28c840;"></span>
            <span class="code-card__title">agent.ts</span>
          </div>
<pre><span class="kw">async function</span> <span class="fn">paidFetch</span>(url: string) {
  <span class="kw">let</span> res = <span class="kw">await</span> <span class="fn">fetch</span>(url);

  <span class="kw">if</span> (res.status === <span class="num">402</span>) {
    <span class="kw">const</span> { payment } = <span class="kw">await</span> res.<span class="fn">json</span>();

    <span class="cm">// Pay with ClawPurse</span>
    <span class="kw">const</span> { send, loadKeystore }
      = <span class="kw">await</span> <span class="fn">import</span>(<span class="str">"clawpurse"</span>);
    <span class="kw">const</span> { wallet, address }
      = <span class="kw">await</span> <span class="fn">loadKeystore</span>(
          process.env.CLAWPURSE_PASSWORD!
        );
    <span class="kw">await</span> <span class="fn">send</span>(
      wallet, address,
      payment.address, payment.amount,
      { memo: payment.memo }
    );

    <span class="cm">// Retry with proof</span>
    res = <span class="kw">await</span> <span class="fn">fetch</span>(url, {
      headers: {
        <span class="str">"X-Payment-Proof"</span>: payment.invoiceId
      }
    });
  }
  <span class="kw">return</span> res.<span class="fn">json</span>();
}</pre>
        </div>
      </div>
    </section>

    <!-- ============ QUICK START ============ -->
    <section class="section reveal" id="quick-start">
      <span class="tag tag--mint">クイックスタート</span>
      <h2 class="section__title">1分以内にゲートウェイをインストール・実行</h2>
      <div class="code-card" style="max-width: 680px;">
        <div class="code-card__header">
          <span class="code-card__dot" style="background:#ff5f57;"></span>
          <span class="code-card__dot" style="background:#febc2e;"></span>
          <span class="code-card__dot" style="background:#28c840;"></span>
          <span class="code-card__title">terminal</span>
        </div>
<pre><span class="cm"># Clone and install</span>
git clone https://github.com/mhue-ai/clawpurse-gateway.git
<span class="kw">cd</span> clawpurse-gateway && npm install

<span class="cm"># Configure</span>
cp .env.example .env
<span class="cm"># Set GATEWAY_PAYMENT_ADDRESS and JWT_SECRET</span>

<span class="cm"># Start a test upstream</span>
npm run test:upstream

<span class="cm"># Start the gateway</span>
npm run dev

<span class="cm"># Test the 402 flow</span>
curl <span class="str">http://localhost:4020/api/test</span>
<span class="cm"># Pay, then retry with proof:</span>
curl -H <span class="str">"X-Payment-Proof: &lt;invoiceId&gt;"</span> \
     <span class="str">http://localhost:4020/api/test</span></pre>
      </div>
    </section>

    <!-- ============ ARCHITECTURE ============ -->
    <section class="section reveal" id="architecture">
      <span class="tag tag--gold">アーキテクチャ</span>
      <h2 class="section__title">TypeScriptマイクロサービスアーキテクチャ</h2>
      <p class="section__desc">
        集約されたTypeScriptコードベース — ゲートウェイロジック、4つの内部サービス、ミドルウェア。46のユニットテストが全レイヤーをカバー。
      </p>
      <div class="arch-cards">
        <div class="acard">
          <div class="acard__name" style="color:var(--accent-402);">config.ts</div>
          <div class="acard__desc">環境変数駆動のゲートウェイ設定</div>
        </div>
        <div class="acard">
          <div class="acard__name" style="color:var(--accent-mint);">db.ts</div>
          <div class="acard__desc">SQLite：インボイス、前払い、ログ</div>
        </div>
        <div class="acard">
          <div class="acard__name" style="color:var(--accent-gold);">invoice.ts</div>
          <div class="acard__desc">インボイス作成とルート価格設定</div>
        </div>
        <div class="acard">
          <div class="acard__name" style="color:var(--accent-402);">verify.ts</div>
          <div class="acard__desc">オンチェーン決済検証</div>
        </div>
        <div class="acard">
          <div class="acard__name" style="color:var(--accent-mint);">proxy.ts</div>
          <div class="acard__desc">アップストリームへのリバースプロキシ</div>
        </div>
        <div class="acard">
          <div class="acard__name" style="color:var(--accent-gold);">AuthService</div>
          <div class="acard__desc">管理API用JWT認証</div>
        </div>
        <div class="acard">
          <div class="acard__name" style="color:var(--accent-402);">WalletService</div>
          <div class="acard__desc">内部ウォレット台帳</div>
        </div>
        <div class="acard">
          <div class="acard__name" style="color:var(--accent-mint);">TxService</div>
          <div class="acard__desc">ウォレット間送金</div>
        </div>
        <div class="acard">
          <div class="acard__name" style="color:var(--accent-gold);">BlockchainSvc</div>
          <div class="acard__desc">内部ブロックチェーン</div>
        </div>
      </div>
    </section>

    <!-- ============ CONFIGURATION ============ -->
    <section class="section reveal" id="configuration">
      <span class="tag tag--402">設定</span>
      <h2 class="section__title">環境変数によるゲートウェイ設定</h2>
      <p class="section__desc">すべての設定は環境変数または<code style="font-size:0.9rem; background:var(--bg-elevated); padding:2px 6px; border-radius:4px;">.env</code>ファイル経由。</p>
      <div class="config-table-wrap">
        <table>
          <thead><tr><th>変数</th><th>デフォルト</th><th>説明</th></tr></thead>
          <tbody>
            <tr><td>PORT</td><td>4020</td><td class="desc-cell">ゲートウェイリッスンポート</td></tr>
            <tr><td>GATEWAY_UPSTREAM</td><td>http://localhost:3000</td><td class="desc-cell">プロキシ先のアップストリームAPI</td></tr>
            <tr><td>GATEWAY_PAYMENT_ADDRESS</td><td>&mdash;</td><td class="desc-cell">あなたのNeutaroウォレットアドレス（必須）</td></tr>
            <tr><td>GATEWAY_DEFAULT_PRICE</td><td>0.001</td><td class="desc-cell">リクエストあたりのデフォルト価格（NTMPI）</td></tr>
            <tr><td>GATEWAY_ROUTES</td><td>&mdash;</td><td class="desc-cell">ルート価格オーバーライド</td></tr>
            <tr><td>GATEWAY_REST</td><td>https://api2.neutaro.io</td><td class="desc-cell">Neutaro REST APIエンドポイント</td></tr>
            <tr><td>GATEWAY_MIN_CONFIRMATIONS</td><td>1</td><td class="desc-cell">必要なブロック確認数</td></tr>
            <tr><td>GATEWAY_INVOICE_TTL</td><td>300</td><td class="desc-cell">インボイス有効期間（秒）</td></tr>
            <tr><td>GATEWAY_PREPAID</td><td>false</td><td class="desc-cell">前払い残高システムを有効化</td></tr>
            <tr><td>GATEWAY_DB</td><td>./gateway.db</td><td class="desc-cell">SQLiteデータベースパス</td></tr>
            <tr><td>JWT_SECRET</td><td>&mdash;</td><td class="desc-cell">管理API JWT用シークレット（必須）</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- ============ ECOSYSTEM ============ -->
    <section class="section reveal" id="ecosystem">
      <span class="tag tag--mint">エコシステム</span>
      <h2 class="section__title">Timpi、Neutaro、ClawPurseエコシステムの一部</h2>
      <div class="eco-grid">
        <div class="eco-card">
          <h3>ClawPurseウォレット</h3>
          <p>
            暗号化キーストア、ガードレール、ステーキング、送金先許可リスト付きのローカルNTMPIウォレット。ゲートウェイ経由での決済のリファレンスクライアント。
          </p>
          <p style="margin-top:12px;"><a href="https://github.com/mhue-ai/ClawPurse" target="_blank" rel="noopener">github.com/mhue-ai/ClawPurse &rarr;</a></p>
        </div>
        <div class="eco-card">
          <h3>Neutaroブロックチェーン</h3>
          <p>
            NTMPIを支えるCosmos SDKチェーン。すべてのゲートウェイ決済はNeutaroのREST APIに直接検証 — オラクルなし、ブリッジなし。
          </p>
          <p style="margin-top:12px;"><a href="https://neutaro.com" target="_blank" rel="noopener">neutaro.com &rarr;</a></p>
        </div>
        <div class="eco-card">
          <h3>Timpiネットワーク</h3>
          <p>
            プライバシーファーストの分散型検索とオープンデータAPI、DePINノード。ClawPurse GatewayはTimpiベースのサービスをマイクロペイメントで収益化できます。
          </p>
          <p style="margin-top:12px;"><a href="https://timpi.io" target="_blank" rel="noopener">timpi.io &rarr;</a></p>
        </div>
        <div class="eco-card">
          <h3>Timpi Dripファウセット</h3>
          <p>
            CAPTCHAの代わりにプルーフオブワークチャレンジを使用するエージェントフレンドリーなNTMPIファウセット。OpenClaw認証エージェントはより高スループットのドリップを取得。
          </p>
          <p style="margin-top:12px;"><a href="https://drip.clawpurse.ai" target="_blank" rel="noopener">drip.clawpurse.ai &rarr;</a></p>
        </div>
      </div>
    </section>

    <!-- ============ FAQ ============ -->
    <section class="section reveal" id="faq">
      <span class="tag tag--gold">FAQ</span>
      <h2 class="section__title">よくある質問</h2>
      <div style="display: flex; flex-direction: column; gap: 20px; max-width: 760px;">
        <div class="fcard">
          <h3>ClawPurse Gatewayとは？</h3>
          <p>Neutaroブロックチェーン上のNTMPIマイクロペイメントで任意のAPIをゲーティングする<strong>402 Payment Required</strong>ステータスコードを実装するオープンソースHTTPリバースプロキシ。AIエージェント、自動化スクリプト、マシン間取引向けのリクエスト単位課金・前払い残高フローをサポート。</p>
        </div>
        <div class="fcard">
          <h3>HTTP 402決済フローの仕組みは？</h3>
          <p>クライアントがゲート付きエンドポイントにリクエストし、invoiceId、amount、address、memoを含むインボイス付きの402レスポンスを受け取ります。ClawPurseまたはNeutaroウォレットでオンチェーン決済し、<code style="font-size:0.82rem; background:var(--bg-elevated); padding:2px 6px; border-radius:4px;">X-Payment-Proof</code>ヘッダー付きでリトライ。ゲートウェイがNeutaroでトランザクションを検証しアップストリームにプロキシ。</p>
        </div>
        <div class="fcard">
          <h3>NTMPIとは何ですか？どうやって入手できますか？</h3>
          <p>NTMPIはNeutaroブロックチェーンのネイティブトークンで、 <a href="https://timpi.io" target="_blank" rel="noopener" style="color:var(--accent-mint); text-decoration:none;">Timpi</a> 分散型検索ネットワークの一部です。 <a href="https://drip.clawpurse.ai" target="_blank" rel="noopener" style="color:var(--accent-mint); text-decoration:none;">Timpi Dripファウセット</a>から無料のNTMPIを入手するか、 <a href="https://www.mexc.com/exchange/NTMPI_USDT" target="_blank" rel="noopener" style="color:var(--accent-mint); text-decoration:none;">MEXC</a> でNTMPI/USDTスポットペアから購入、またはGravity Bridge経由でOsmosisにブリッジしてKeplrまたはLeapウォレットでスワップできます。</p>
        </div>
        <div class="fcard">
          <h3>AIエージェントはClawPurse Gatewayを自律的に使用できますか？</h3>
          <p>はい。ゲートウェイはエージェントAIとマシン間ワークロード向けに設計されています。エージェントは402インボイスをプログラマティックに解析し、 <a href="https://github.com/mhue-ai/ClawPurse" target="_blank" rel="noopener" style="color:var(--accent-mint); text-decoration:none;">ClawPurseウォレットAPI</a>経由でオンチェーン決済し、決済証明ヘッダー付きでリトライできます — すべて人間の介入なしで。</p>
        </div>
      </div>
    </section>

    <!-- ============ DONATE ============ -->
    <section class="section reveal">
      <div class="donate">
        <p style="font-weight:600; font-size:1.1rem; color:var(--accent-mint); margin-bottom:4px;">
          MhueにTimpiコーヒーをおごる ☕
        </p>
        <p style="color:var(--text-2); font-size:0.92rem;">
          ゲートウェイがスタック運用の時間を節約しているなら、ビルダーにチップを。
        </p>
        <code class="donate__addr">neutaro1e8xal8tqdegu4w48z3fphemd3hc07gech3pfek</code>
        <p style="margin-top:14px; font-size:0.85rem; color:var(--text-3);">メモは任意 — 何をシップしたか教えてください！</p>
      </div>
    </section>

  </main>

  <!-- ============ FOOTER ============ -->
  <footer>
    <nav aria-label="Page sections" style="margin-bottom:20px;">
      <div class="footer-links">
        <a href="#payment-flows">決済フロー</a>
        <a href="#features">機能</a>
        <a href="#api">APIリファレンス</a>
        <a href="#integration">インテグレーション</a>
        <a href="#quick-start">クイックスタート</a>
        <a href="#configuration">設定</a>
        <a href="#faq">FAQ</a>
      </div>
    </nav>
    <nav aria-label="External links">
      <div class="footer-links">
        <a href="https://github.com/mhue-ai/clawpurse-gateway" target="_blank" rel="noopener">ゲートウェイリポジトリ</a>
        <a href="https://github.com/mhue-ai/ClawPurse" target="_blank" rel="noopener">ウォレットリポジトリ</a>
        <a href="https://drip.clawpurse.ai" target="_blank" rel="noopener">Timpi Drip</a>
        <a href="https://neutaro.com" target="_blank" rel="noopener">Neutaro</a>
        <a href="https://timpi.io" target="_blank" rel="noopener">Timpi</a>
        <a href="https://explorer.neutaro.io" target="_blank" rel="noopener">エクスプローラー</a>
      </div>
    </nav>
    <p>Mhueファミリーによるメンテナンス &bull; ClawPurse Gateway v0.2.0 &bull; MITライセンス</p>
  </footer>

  <script>
    // Intersection Observer for scroll reveals
    const obs = new IntersectionObserver((entries) => {
      entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('visible'); obs.unobserve(e.target); } });
    }, { threshold: 0.12 });
    document.querySelectorAll('.reveal').forEach(el => obs.observe(el));
  </script>
</body>
</html>
